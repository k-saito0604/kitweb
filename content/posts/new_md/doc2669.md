+++
title = "[GGH4.X-5.X] GGEasyMonitorConnectionCheck とはどんなツールなのか？"
date = "2015-11-04"
tags = ["技術ノート"]
categories = ["tech"]
banner = "img/technote.jpg"
+++

-----------------------------------------------------------------------------------------------------------------------------

*技術ノート

2015/11/04*


[番号]
技術ノート KGTN 2015110202

[現象]
[GGH4.X-5.X] GGEasyMonitorConnectionCheck とはどんなツールなのか？

[説明]
設定ファイルまたはコマンドラインで指定したGGサーバーに対して，GGのプロトコルで接続を行い，最大セッション数と現在のセッション数を得るプログラムです．このプログラムが作成された背景は，ログオン中のセッションは正常に動作しているにも関わらず，新規にログオン出来ない
（ログオン処理が完了しない）
現象が発生し，それを検出することを目的としたものです．

設定ファイルと起動パラメタ
設定ファイル GGEasyMonitorConnectionCheck.ini の default
セクションで，以下のパラメタを設定して下さい．
[なお，拡張パックのライセンスが無い場合は，項目 rxpAddr
の値に関わりなくGGサーバーのIPアドレスとして 127.0.0.1 が設定されます
（つまり外部のGGサーバーの監視は出来ません） ．]{.underline}

  ---------- ----------------------------------------------------
   設定項目                          説明
   logLevel   ログの出力レベル，通常は1を指定し，障害時は4を指定
     logd          ログファイルを作成するフォルダ（省略可）
   licFile      拡張パックのライセンスファイルのパス（省略可）
   rxpAddr       GGサーバーのIPアドレス（既定値は127.0.0.1）
   rxpPort        GGサーバーのAPSのポート番号（既定値は491）
   timeout             タイムアウトの秒数（既定値は30）
  ---------- ----------------------------------------------------

GGサーバーのアドレスおよびポート番号は，起動パラメタでも指定することが出来ます．

  ---------- -------------------------------
   設定項目               説明
   -rxpAddr      GGサーバーのIPアドレス
   -rxpPort    GGサーバーのAPSのポート番号
   -timeout   タイムアウトの秒数（1～3600）
  ---------- -------------------------------

プログラムの戻り値
プログラムの戻り値で，状況およびセッション数の情報を知ることが出来ます．

  ---------- ---------------------------------------------
    戻り値                       説明
     101            接続出来ない（接続処理に失敗）
     102             接続出来ない（タイムアウト）
     201                アカウントの認証に失敗
     202              ログオン処理でタイムアウト
     999                      内部エラー
   1000以上   最大セッション数×1000 ＋ 現在のセッション数
  ---------- ---------------------------------------------

標準出力
標準出力には 0 （正常） または 1 （異常）
が出力されますので，この出力を取り込むことで Zabbix
等でのサーバー監視が可能となります．


### ファイル

 
 


[KGTN2015110202.pdf](http://techreport.kitasp.net/attachments/download/2366/KGTN2015110202.pdf)
 [(89.8 KB)] [kitasp 技術センター, 2015/12/17
10:59]


 


 

