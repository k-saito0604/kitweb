+++
title = "エンタープライズオプションのプログラム GMFileProc の目的は？"
date = "2010-07-21"
tags = ["技術ノート"]
categories = ["tech"]
banner = "img/technote.jpg"
+++

-----------------------------------------------------------------------------------------------------------------------------

*技術ノート

2010/07/21*


[番号]
技術ノート KGTN 2010072104

[現象]
エンタープライズオプションのプログラム GMFileProc の目的は？

[説明]
GGサーバの状態を管理する方法として，セッション監視SDKの GMCheck
でGGサーバの情報を取得し，その情報を直接DBへ登録する処理が考えられます．正常系のみを考えれば，この方式は単純で効率も良いのですが，大規模案件では想定外の様々な障害が発生しますので，このような方式では問題点の切り分けが難しいという大きな欠点があります
（例:
多くのGGサーバがDBのレコードを更新するため，DBで異常が発生した場合，その契機の発見が難しい）
．

このようなことから，障害発生時に確実に問題点を発見できるように，以下のような処理を行います．

セッション監視SDKの GMCheck 等でGGサーバの状態をファイルに記録
状態が記録されたファイルをDB登録用共有フォルダへコピー
共有フォルダ中のファイルを順にDBへ登録
登録が完了したファイルをバックアップフォルダへ移動

各時点でのGGサーバの状態はファイルに記録され，そのファイルの情報は１箇所でDBへ反映され，さらにバックアップフォルダへ保存されますので，障害発生後にファイルを解析することで問題点を発見することが可能になります．プログラム
GMFileProc
は，この処理の中でファイルの管理を行うプログラムで，以下のような機能を受け持ちます．

DB登録用共有フォルダ中のファイルを順にピックアップ
ピックアップしたファイルをDB登録用プログラムを呼び出してDBへ情報を登録
登録が完了したファイルをバックアップフォルダへ移動
バックアップフォルダ中の古いファイルを削除
OSの異常等に備えて処理した内容をトレースログやイベントログに記録

これ以外にも，ネットワークやサーバが過負荷でファイルが滞留した時に備え，古いファイルをスキップする等の機能も持っています．


### ファイル

 
 


[KGTN2010072104.pdf](http://techreport.kitasp.net/attachments/download/234/KGTN2010072104.pdf)
 [(73 KB)] [kitasp 技術センター, 2010/07/21
14:44]


 


 

