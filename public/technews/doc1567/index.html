<!DOCTYPE html>
<html lang="ja-jp">

  <head>
  <meta charset="utf-8">
  <meta name="robots" content="noindex">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <title>クライアントドライブ機能を使い，サーバからクライアントへファイルをコピーするとセッションが切れることがある．また，セッションが切れない場合でも，クライアント側でファイルがロックされ削除が出来ない等の現象が発生することもある．</title>
  <meta name="author" content="kitasp" />
  
  
  
  
  <meta name="keywords" content="devows, hugo, go">
  
  
  <meta name="description" content="きっとエイエスピーのホームページ">

  <meta name="generator" content="Hugo 0.72.0" />

  
  <link href='//fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,500,700,800' rel='stylesheet' type='text/css'>

  
  <link rel="stylesheet" href="//use.fontawesome.com/releases/v5.11.2/css/all.css">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

  
  <link href="/css/animate.css" rel="stylesheet">

  
  
    <link href="/css/style.blue.css" rel="stylesheet" id="theme-stylesheet">
  

  
  <link href="/css/custom.css" rel="stylesheet">


  
  <link href="/js/slick.css" rel="stylesheet">
  <link href="/js/slick-theme.css" rel="stylesheet">

  
  
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
  <link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" href="/img/apple-touch-icon.png" />

  
  <link href="/css/owl.carousel.css" rel="stylesheet">
  <link href="/css/owl.theme.css" rel="stylesheet">

  
  <link rel="alternate" href="/index.xml" type="application/rss+xml" title="きっとエイエスピーはGlaphOn社GO-Globalの総代理店">

  
  
  
  
  
  
  
  <meta property="og:locale" content="ja_jp">
  <meta property="og:site_name" content="きっとエイエスピーはGlaphOn社GO-Globalの総代理店">
  <meta property="og:title" content="クライアントドライブ機能を使い，サーバからクライアントへファイルをコピーするとセッションが切れることがある．また，セッションが切れない場合でも，クライアント側でファイルがロックされ削除が出来ない等の現象が発生することもある．">
  <meta property="og:type" content="website">
  <meta property="og:url" content="/technews/doc1567/" />
  <meta property="og:description" content="きっとエイエスピーのホームページ">
  <meta property="og:image" content="img/technote.jpg">
  <meta property="og:image:type" content="image/jpg">
  
  
  
    <meta property="og:image:width" content="512">
    <meta property="og:image:height" content="288">
  
  
  <meta property="og:updated_time" content="2010-11-01T00:00:00Z">
  

  
  <meta name="twitter:card" content="summary">
  
  <meta name="twitter:title" content="クライアントドライブ機能を使い，サーバからクライアントへファイルをコピーするとセッションが切れることがある．また，セッションが切れない場合で …">
  
  <meta name="twitter:image" content="img/technote.jpg">
  
  <meta name="twitter:description" content="きっとエイエスピーのホームページ">
  


  <script defer src="https://www.gstatic.com/firebase/5.3.1/firebase-app.js"></script>
  <script defer src="https://www.gstatic.com/firebase/5.3.1/firebase-storage.js"></script>
  <script defer src="https://www.gstatic.com/firebase/5.3.1/firebase-auth.js"></script>
  <script defer src="https://www.gstatic.com/firebase/init.js"></script>
  <script src="https://cdn.firebase.com/libs/firebaseui/3.1.1/firebaseui.js"></script>
  <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/3.1.1/firebaseui.css" />
  <script src="/js/config.js"></script>

</head>


  <body>

    <div id="all">

        <header>
          
<div id="top">
  <div class="container">
    <div class="row">
      <div class="col-xs-5">
        <a href="https://www.kitasp.com/"><img src="/img/logo_s.png/" alt="クライアントドライブ機能を使い，サーバからクライアントへファイルをコピーするとセッションが切れることがある．また，セッションが切れない場合でも，クライアント側でファイルがロックされ削除が出来ない等の現象が発生することもある． logo" class=""></a>
      </div>
      <div class="col-xs-7">
        </div>
      </div>
    </div>
  </div>
</div>



          <div class="navbar-affixed-top" data-spy="affix" data-offset-top="500">

    <div class="navbar navbar-default yamm" role="navigation" id="navbar">

        <div class="container">
            <div class="navbar-header">
                <a class="navbar-brand home" href="/">
                    <img src="/img/logo-go-small.png" alt="クライアントドライブ機能を使い，サーバからクライアントへファイルをコピーするとセッションが切れることがある．また，セッションが切れない場合でも，クライアント側でファイルがロックされ削除が出来ない等の現象が発生することもある． logo" class="hidden-xs hidden-sm">
                    <img src="/img/logo-go-small.png" alt="クライアントドライブ機能を使い，サーバからクライアントへファイルをコピーするとセッションが切れることがある．また，セッションが切れない場合でも，クライアント側でファイルがロックされ削除が出来ない等の現象が発生することもある． logo" class="visible-xs visible-sm">
                    <span class="sr-only">クライアントドライブ機能を使い，サーバからクライアントへファイルをコピーするとセッションが切れることがある．また，セッションが切れない場合でも，クライアント側でファイルがロックされ削除が出来ない等の現象が発生することもある． - ホームへ戻る</span>
                </a>
                <div class="navbar-buttons">
                    <button type="button" class="navbar-toggle btn-template-main" data-toggle="collapse" data-target="#navigation">
                      <span class="sr-only">ナビゲーションの切り替え</span>
                        <i class="fas fa-align-justify"></i>
                    </button>
                </div>
            </div>
            

            <div class="navbar-collapse collapse" id="navigation">
                <ul class="nav navbar-nav navbar-right">
                  
                  <div class = "topbotton">
                    <a href="/contact" class="btn-square-shadow-ora">問い合わせ</a>
                    <a href="https://gitbook.kitasp.com/" class="btn-square-shadow">技術サイト</a>
                    <a href="https://www.kitasp.com/" class="btn-square-shadow-old">会社概要</a><br>
                    <a class="fas fa-search" href="/search">ページ検索</a>
                  </div>
                  
                  
                  
                  <li class="dropdown">
                    
                    <a href="/go-global/">GO-Globalとは</a>
                    
                  </li>
                  
                  
                  <li class="dropdown">
                    
                    <a class="dropdown-toggle" href="/function-introduction/" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="linkmenu">GO-Global活用</span><span class="caret"></span></a>
                    <ul class="dropdown-menu">
                      
                        <li>
                          <a href="/contents/web-separation/">インターネット分離</a>
                        </li>
                      
                        <li>
                          <a href="/contents/work-style-reform/">働き方改革</a>
                        </li>
                      
                        <li>
                          <a href="/contents/thin-client/">シンクライアント</a>
                        </li>
                      
                        <li>
                          <a href="/contents/lift-shift/">アプリクラウド化</a>
                        </li>
                      
                        <li>
                          <a href="/telework">テレワーク導入</a>
                        </li>
                      
                    </ul>
                    
                  </li>
                  
                  
                  <li class="dropdown">
                    
                    <a class="dropdown-toggle" href="/case-study" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="linkmenu">導入事例</span><span class="caret"></span></a>
                    <ul class="dropdown-menu">
                      
                        <li>
                          <a href="/adaptation-facility-1">医療現場</a>
                        </li>
                      
                        <li>
                          <a href="/adaptation-facility-2">ISV</a>
                        </li>
                      
                        <li>
                          <a href="/adaptation-facility-3">中小企業</a>
                        </li>
                      
                        <li>
                          <a href="/adaptation-facility-4">BCP対策</a>
                        </li>
                      
                        <li>
                          <a href="/adaptation-facility-5">教育現場</a>
                        </li>
                      
                    </ul>
                    
                  </li>
                  
                  
                  <li class="dropdown">
                    
                    <a href="/faq/">よくある質問</a>
                    
                  </li>
                  
                  
                  <li class="dropdown">
                    
                    <a href="/partners-list/">代理店一覧</a>
                    
                  </li>
                  
                </ul>
            </div>
            

            <div class="collapse clearfix" id="search">
                <form class="navbar-form" role="search">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search">
                        <span class="input-group-btn">
                    <button type="submit" class="btn btn-template-main"><i class="fas fa-search"></i></button>
                </span>
                    </div>
                </form>
            </div>
            

        </div>
    </div>
    

</div>




        </header>

        <div id="heading-breadcrumbs">
    <div class="container">
        <div class="row">
            <div class="col-md-12">

            
                <h1>クライアントドライブ機能を使い，サーバからクライアントへファイルをコピーするとセッションが切れることがある．また，セッションが切れない場合でも，クライアント側でファイルがロックされ削除が出来ない等の現象が発生することもある．　</h1>
            </div>
        </div>
    </div>
</div>


        <div id="content">
            <div class="container">

                <div class="row">
                  
                    

                    <div class="col-md-9" id="blog-post">

                        
                          <p class="text-muted text-uppercase mb-small text-right">
                            
                            
                            2010-11-01
                          </p>
                        
                      
                        <div id="post-content">
                          <hr>
<p>*技術ノート</p>
<p>2010/11/01*</p>
<p>[番号]
技術ノート KGTN 2009091501</p>
<p>[現象]
クライアントドライブ機能を使い，サーバからクライアントへファイルをコピーするとセッションが切れることがある．また，セッションが切れない場合でも，クライアント側でファイルがロックされ削除が出来ない等の現象が発生することもある．</p>
<p>[説明]
ファイルサイズが19MBを越えると 「セッションが切れる」
「０バイトのファイルが作成される」 「ファイルがロックされる」
「コピーしたファイルの正しいファイルサイズが得られない」
という現象が発生します．この問題は，回線速度やファイルの内容
（テキスト・バイナリ）
に依存せず，ファイルサイズのみに依存して発生します．ファイルがロックされた場合は，ActiveXクライアントではIEを閉じることで，Windowsクライアントはggw.exeを終了させることでロックが解除されます．本件はGraphOn社も障害として認識しており，将来のバージョンで修正する予定です．</p>
<p>補足１
クライアントドライブ機能でファイルをコピーする場合，FTPのような専用のファイル転送プロトコルでコピーが行われる訳ではなく，Windows内部の低レベルのファイルコピー処理をフックして，サーバとクライアント間でファイルのコピー処理が行われます．このような仕組みにより，
Windowsの遅延書き込み機能等の極めて低レベルな処理もGGのセッションの中で行われ，サーバとクライアント間でエラー等のイベントが正常に伝わらず，それぞれが相手方からのイベントを待ち続けて，タイムアウトによるセッション断や継続的なファイルのロックが発生したものと推測します．なお，本補足事項は弊社の独自調査による結果
（GraphOn社にも報告済） を元に記載しています．</p>
<p>補足２
セッション断については，Windowsがプログレスダイアログを表示するケースで発生することが分かっております．DOS窓を開きcopyコマンドでコピーを行った場合は，セッション断やファイルのロックは発生しません．なお，本補足事項は弊社の独自調査による結果
（GraphOn社にも報告済） を元に記載しています．</p>
<p>補足3
なぜ発生したのか&hellip;　クライアントドライブ機能のサーバ側とクライアント側で，それぞれが相手からのイベントを待っている状態にあり，処理が完結しないためセッション断やファイルロック等が発生していると推測されます．</p>
<p>補足4
どうすれば発生しないのか&hellip;　「ファイルの大きさで対応する」
ことが妥当だと考えますが，しかし明確な根拠を持ったファイルの大きさを示すことは困難です．恐らく
Windows 内部のキャッシュの空き等に依存しているため，
正確には分かりませんが，実測値で19MB以下であれば大丈夫のようです．なお，GraphOn社には全て状況を報告しており，その情報を試験＆分析作業を行っております．
補足5
GraphOn社のコメント&hellip; We have done some more testing and the issue with
the filelock did not occur with a filesize of 20,001KB. It did occur
with a filesize of 20,041KB.</p>
<p>20MB （= 20,480KＢ）
は20,041KBを越えますので，運用回避を行う場合のファイルサイズは
「19MB以下」 となります．</p>
<p>補足6
GraphOn社のコメント&hellip;There is a problem on the client that is
preventing all of the requests associated with the file copy operation
from being processed. It is possible that an overflow is occurring in
the message queue, but it will require more investigation to determine
if this is the case. &mdash; The CopyFile function in GGW3.2 is a very
complicated function. As a result, it will be difficult and risky to to
fix this bug in GGW 3.2. The target milestone for this issue to be
resolved is version 4.0 since it will be fixed by design.</p>
<p>本件の原因は，ファイルコピー時にサーバ側から送信されるメッセージが，クライアント側のメッセージキュー上でオーバーフローしているのが原因だと推測します．Ver3.2系の
CopyFile
機能は非常に複雑な処理を行っており，この問題をVer3.2系で修正することは容易ではなくリスクも伴います．従って，CopyFile
機能を設計レベルから見直して，Ver4.0系で対応する予定です． （注：
GraphOn社はVer3.2系で修正しようと約1ヶ月に及ぶ調査および試行錯誤を行いましたが，最終的にこの結論に至りました）</p>
<p>補足7
Ver4.0系の内部評価版 （ビルド7757） で検証を行ったところ， 1)
約64MBのファイルがクライアント側に同じ内容でコピーされ， 2)
コピー中のダイアログが正常に終了し， 3)
ロック状態も発生しませんでした．従って，Ver4.0の製品版では，クライアントドライブの機能が改善すると期待できます．</p>
<p>補足8
Ver4.0.0 Patch 1 でFASTER CLIENT DRIVE ACCESS
機能が実装されました．Ver4.0.0
と互換性がありませんので，サーバ側だけでなくクライアント側のバージョンアップも必要です．以下は，本件に関するGraphOn社の技術ノートです．</p>
<p>Optimizations to the Client Drives feature require upgrading both the
client and the host. If an older version of the client accesses the
4.0.0.8304 host, Client Drives will be disabled.</p>
<p>補足9
上記で述べた障害が発生した時は，プロトコル上での不整合が発生しておりますので，続けてファイルコピーを行った場合，以下のような現象が発生することがあります．
・クライアント側にファイルが作成されない．
・クライアント側に0バイトのファイルが作成される．
（複数回のコピー処理を繰り返した時）後続のファイルコピー時に先行してコピーしたファイルがクライアント側に作成される．
このようなことから，ファイルコピーでエラー状態に陥った後，さらにGGの使用を継続しても，その結果については保証することが出来ません．</p>
<h3 id="ファイル">ファイル</h3>
<p><a href="http://techreport.kitasp.net/attachments/download/28/KGTN2009091501.pdf">KGTN2009091501.pdf</a>
[(145 KB)] [kitasp 技術センター, 2010/11/01
12:40]</p>

                        </div>
                        
                        
                        
                    
                        

                    </div>
                    

                    

                    

                    <div class="col-md-3">

                        

                        

<div class="panel panel-default sidebar-menu">

    <div class="panel-heading">
      <h3 class="panel-title">検索</h3>
    </div>

    <div class="panel-body">
        <form action="https://cse.google.com/cse?cx=004221574702554897620:tgludhvdjca" method="get" accept-charset="UTF-8" role="search">
            <div class="input-group">
                <input type="search" name="q" class="form-control" placeholder="検索">
                <input type="hidden" name="sitesearch" value="/">
                <span class="input-group-btn">
                    <button type="submit" class="btn btn-template-main"><i class="fas fa-search"></i></button>
                </span>
            </div>
        </form>
    </div>
</div>







<div class="panel panel-default sidebar-menu">

    <div class="panel-heading">
        <h3 class="panel-title">カテゴリー</h3>
    </div>

    <div class="panel-body">
        <ul class="nav nav-pills nav-stacked">
            
            
            <li>
                <a href="/categories/news">news (13)</a>
            </li>
            
        </ul>
    </div>

</div>








<div class="panel sidebar-menu">

    <div class="panel-heading">
        <h3 class="panel-title">タグ</h3>
    </div>

    <div class="panel-body">
        <ul class="tag-cloud">
            
            
            <li>
                <a href="/tags/news"><i class="fas fa-tags"></i> news</a>
            </li>
            
            <li>
                <a href="/tags/windowsupdate"><i class="fas fa-tags"></i> windowsupdate</a>
            </li>
            
        </ul>
    </div>

</div>






                        

                    </div>
                    

                    

                </div>
                

            </div>
            
        </div>
        

        
        <footer id="footer">
        <div class="footer-nav-wrapper">        
        <div class="container">
            
    <div class="col-md-12">
            <div class="col-md-3 col-sm-3">
                <div class="footer-nav-column">
                    <div class="footer-nav-column-title"></div>
                    <div class="footer-nav-column-content">
                    <a href="/go-global/">GO-Globalとは</a>
                    <ul>
                        <li>
                            <a href="/web-separation/">インターネット分離</a>
                        </li>
                        <li>
                            <a href="/work-style-reform/">働き方改革</a>
                        </li>
                        <li>
                            <a href="/thin-client/">シンクライアント</a>
                        </li>
                        <li>
                            <a href="/lift-shift/">アプリクラウド化</a>
                        </li>
                        <li>
                            <a href="/telework/">テレワーク導入</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <hr class="hidden-md hidden-lg hidden-sm">
        <div class="col-md-3 col-sm-3">
            <div class="footer-nav-column">
                <div class="footer-nav-column-title"></div>
               <div class="footer-nav-column-content">
                <a href="/case-study/">導入事例</a>
                <ul>
                    <li>
                        <a href="/adaptation-facility-1/">医療現場</a>
                    </li>
                    <li>
                        <a href="/adaptation-facility-2/">ISV</a>
                    </li>
                    <li>
                        <a href="/adaptation-facility-3/">中小企業</a>
                    </li>
                    <li>
                        <a href="/adaptation-facility-4/">BCP対策</a>
                    </li>
                    <li>
                        <a href="/adaptation-facility-5/">教育現場</a>
                    </li>
                </ul>
            </div>
        </div>
        </div>
        <hr class="hidden-md hidden-lg hidden-sm">
                <div class="col-md-3 col-sm-3">
                    <div class="footer-nav-column">
                        <div class="footer-nav-column-title"></div>
                        <div class="footer-nav-column-content">
                            <a href="/post/">お知らせ</a>
                            <ul>
                                <li>
                                    <a href="/support-schedule/">対応スケジュール</a>
                                </li>
                                <li>
                                    <a href="/news/">Download</a>
                                </li>
                                <li>
                                    <a href="/categories/news/">サイトニュース</a>
                                </li>
                                <li>
                                    <a href="/categories/tech-news/">技術ニュース</a>
                                </li>
                            </ul>
                        </div>
                        
                    </div>
                    <hr class="hidden-md hidden-lg hidden-sm">
        
                </div>
        <div class="col-md-3 col-sm-3">
            <div class="footer-nav-column">
                <div class="footer-nav-column-content">
                <div class="footer-nav-column-a">
                <a href="/faq/">FAQ</a><br>
                <a href="/partners-list/">代理店一覧</a><br>
                <a href="/contact/">問合せフォーム</a><br>
                <a href="/technical-site/">技術サイト</a><br>
                <a href="/company-information/">企業概要</a>
                <ul>
                <li>
                    <a href="/representative-greetings/">代表あいさつ</a>
                </li>
                <li>
                    <a href="/philosophy/">理念</a>
                </li>
                <li>
                    <a href="/history/">沿革</a>
                </li>
                <li>
                    <a href="/privacy-policy/">個人情報保護方針</a>
                </li>
            </ul>
        </div>
    </div>
</div>
        
    </div>
    </div>
        </div>
    
</footer>







<div id="copyright">
    <div class="container">
        <div class="col-md-12">
            <div class="col-xs-5">
            
           <p style="text-align:center;">Copyright © 2020 KitASP Corp. All Rights Reserved</p>
            
        </div>
                
                    <div class="col-xs-7">
                        <div class="social">
                          
                        <a href="https://www.facebook.com/kitasp2000/" target="_blank" style="opacity: 1;"><i class='fab fa-2x fa-facebook'></i></a>
                        
                        <a href="https://twitter.com/KitASP_Corp" target="_blank" style="opacity: 1;"><i class='fab fa-2x fa-twitter'></i></a>
                        
                        <a href="https://www.instagram.com/kitasp_corp/" target="_blank" style="opacity: 1;"><i class='fab fa-2x fa-instagram'></i></a>
                        
                </div>
                </div>
        </div>
    </div>
</div>







    </div>
    

    
<script src="//code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="/js/jquery.zoom.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/jquery.waypoints.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/Counter-Up/1.0/jquery.counterup.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-parallax/1.1.3/jquery-parallax.js"></script>

<script src="//maps.googleapis.com/maps/api/js?v=3.exp"></script>

<script src="/js/hpneo.gmaps.js"></script>
<script src="/js/gmaps.init.js"></script>
<script src="/js/front.js"></script>

<link href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.7.1/css/lightbox.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.7.1/js/lightbox.min.js" type="text/javascript"></script>
<script type="text/javascript" src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

<script src="/js/owl.carousel.min.js"></script>
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.4/css/all.css">

<script src="/js/slick.min.js"></script>



  </body>
</html>
